{% extends 'base.html' %}

{% block title %}Admin Dashboard - Personal Portfolio{% endblock %}

{% block content %}
  <h1>Admin Dashboard</h1>
  
  <h2>Projects</h2>
  <a href="{{ url_for('admin.new_project') }}" class="btn btn-success mb-3">Add New Project</a>
  {% if projects %}
    <table class="table table-striped">
      <thead>
        <tr>
          <th>Title</th>
          <th>Created</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        {% for project in projects %}
          <tr>
            <td>{{ project['title'] }}</td>
            <td>{{ project['created'] }}</td>
            <td>
              <a href="{{ url_for('admin.edit_project', project_id=project['id']) }}" class="btn btn-sm btn-primary">Edit</a>
              <form action="{{ url_for('admin.delete_project', project_id=project['id']) }}" method="post" style="display:inline;">
                <button type="submit" class="btn btn-sm btn-danger">Delete</button>
              </form>
            </td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  {% else %}
    <p>No projects found.</p>
  {% endif %}

  <h2 class="mt-4">Blog Posts</h2>
  <a href="{{ url_for('admin.new_blog') }}" class="btn btn-success mb-3">Add New Blog Post</a>
  {% if blog_posts %}
    <table class="table table-striped">
      <thead>
        <tr>
          <th>Title</th>
          <th>Created</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        {% for post in blog_posts %}
          <tr>
            <td>{{ post['title'] }}</td>
            <td>{{ post['created'] }}</td>
            <td>
              <a href="{{ url_for('admin.edit_blog', post_id=post['id']) }}" class="btn btn-sm btn-primary">Edit</a>
              <form action="{{ url_for('admin.delete_blog', post_id=post['id']) }}" method="post" style="display:inline;">
                <button type="submit" class="btn btn-sm btn-danger">Delete</button>
              </form>
            </td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  {% else %}
    <p>No blog posts found.</p>
  {% endif %}
{% endblock %}
